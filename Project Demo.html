<!-- <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" /> -->
<!-- <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script> -->

<!DOCTYPE html>
<html>
	<head>
		<title>Hatfield Campus Navigation Map</title>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
		integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
		crossorigin=""/>

		<!-- Make sure you put this AFTER Leaflet's CSS -->
		<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
		integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
		crossorigin=""></script>
		<style>
			html, body {
				height: 100%;
				margin: 0;
			}
			.leaflet-container {
				height: 500px;
				width: 100%;
				max-width: 100%;
				max-height: 100%;
			}
		</style>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	</head>
	<body>
		<div id="map"></div>
        <script>
                //OSM tiles attribution and URL
                var osmLink = '<a href="http://openstreetmap.org">OpenStreetMap</a>';
		var osmURL = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
		var osmAttrib = '&copy; ' + osmLink;

		//Carto tiles attribution and URL
		var cartoLink = '<a href="http://cartodb.com/attributions">CartoDB</a>';
		var cartoURL = 'http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png';
		var cartoAttrib = ' &copy; ' + cartoLink + ' &copy; ' + osmLink;

		//Stamen Toner tiles attribution and URL
		var stamenURL = 'http://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.{ext}';
		var stamenAttrib = 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>';

                //Create map tiles
		var osmMap = L.tileLayer(osmURL, {attribution: osmAttrib});
		var cartoMap = L.tileLayer(cartoURL, {attribution: cartoAttrib});
		var stamenMap = L.tileLayer(stamenURL,{
			attribution: stamenAttrib,
			subdomains: 'abcd',
			minZoom: 0,
			maxZoom: 20,
			ext: 'png'
		});

                //Create map
                var map = L.map('map',{layers: [osmMap]}).setView([-25.754544, 28.231482], 16);
                
                //Base layer definition
                var baseMaps = {"OpenStreetMap": osmMap,"Dark Matter": cartoMap,"Statem Toner": stamenMap};

                var control = L.control.layers(baseMaps).addTo(map);


                var popup = L.popup()
                        .setLatLng([-25.754544, 28.231482])
                        .setContent("University of Pretoria.")
                        .openOn(map);

                // Styling the geojson layer
                function style(feature) {
                return {
                        fillColor: '#E31A1C',
                        radius: 5,
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 0.7
                };
                }

                // add GeoJSON layer to the map once the file is loaded
                function createOverlay(data, layerName) {
                var datalayer = L.geoJson(data ,{
                        pointToLayer: function (feature, coordinates) {
                                return L.circleMarker(coordinates, style(feature));
                        }
                }).addTo(map);
                control.addOverlay(datalayer, layerName); // Add the layer to the Layer Control.
                map.fitBounds(datalayer.getBounds());
                }

                // loading GeoJSON file - Here my html and Gates.geojson file resides in same folder
                $.getJSON("https://github.com/sandranh/GMT320-Shoesandpedals/blob/main/Gates.geojson", function (data) { createOverlay(data, "Gates") });
                        
        </script>
	</body>
</html>
